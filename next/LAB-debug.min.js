/*! LAB.js (LABjs :: Loading And Blocking JavaScript)
    v2.0b (c) Kyle Simpson
    MIT License
*/
(function(j){var Q=j.$LAB,q="UseLocalXHR",C="AlwaysPreserveOrder",y="AllowDuplicates",D="CacheBust",l="Debug",E="BasePath",F=/^[^?#]*\//.exec(location.href)[0],G=/^\w+\:\/\/\/?[^\/]+/.exec(F)[0],i=document.head||document.getElementsByTagName("head"),t=!(XMLHttpRequest||ActiveXObject),R=(j.opera&&Object.prototype.toString.call(j.opera)=="[object Opera]")||("MozAppearance"in document.documentElement.style),k=function(){},H=k,u=document.createElement("script"),v=u.async===true,I=typeof u.preload=="boolean",J=I||(u.readyState&&u.readyState=="uninitialized");if(j.console&&j.console.log){if(!j.console.error)j.console.error=j.console.log;k=function(a){j.console.log(a)};H=function(a,c){j.console.error(a,c)}}if(t)k("LABjs warning: XHR disabled after init failure.");function K(a){return Object.prototype.toString.call(a)=="[object Function]"}function L(a){return Object.prototype.toString.call(a)=="[object Array]"}function M(a,c){var b=/^\/\/[^\/]/,d=/^\w+\:\/\//;if(b.test(a)){a=location.protocol+a}else if(!d.test(a)){if(c!=null){c=(d.test(c))?c:M(c,c[0]=="/"?G:F);a=c+a}}return a}function w(a,c){for(var b in a){if(a.hasOwnProperty(b)){c[b]=a[b]}}return c}function S(a){var c=false;for(var b=0;b<a.scripts.length;b++){if(a.scripts[b].ready&&a.scripts[b].exec_trigger){c=true;a.scripts[b].exec_trigger();a.scripts[b].exec_trigger=null}}return c}function x(a,c,b,d){a.onload=a.onreadystatechange=function(){if((a.readyState&&a.readyState!="complete"&&a.readyState!="loaded")||c[b])return;a.onload=a.onreadystatechange=null;d()}}function N(a,c,b){b.ready=b.finished=true;for(var d=0;d<b.finished_listeners.length;d++){setTimeout(b.finished_listeners[d],0)}b.ready_listeners=[];b.finished_listeners=[]}function T(d,e,f,h,g){setTimeout(function(){if("item"in i){if(!i[0]){setTimeout(arguments.callee,25);return}i=i[0]}var a=document.createElement("script"),c=e.real_src;if(e.type)a.type=e.type;if(e.charset)a.charset=e.charset;if(!f.preload&&!v){if(d[l])k("start script load: "+c);if(v)a.async=false;x(a,h,"finished",g);a.src=c;i.insertBefore(a,i.firstChild)}else if(J){if(d[l])k("start script preload: "+c);h.elem=a;if(I){a.preload=true;a.onpreload=g}else{a.onreadystatechange=function(){if(a.readyState=="loaded")g();a.onreadystatechange=null}}a.src=c}else if(v){if(d[l])k("start script load (ordered async): "+c);a.async=false;x(a,h,"finished",g);a.src=c;i.insertBefore(a,i.firstChild)}else if(c.indexOf(G)==0&&d[q]){var b=XMLHttpRequest?new XMLHttpRequest():(ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null);if(d[l])k("start script preload (xhr): "+c);b.onreadystatechange=function(){if(b.readyState==4){b.onreadystatechange=function(){};h.text=b.responseText+"\n//@ sourceURL="+c;g()}};b.open("GET",c);b.send()}else{if(d[l])k("start script preload (cache): "+c);a.type="text/cache-script";x(a,h,"ready",function(){i.removeChild(a);g()});a.src=c;i.insertBefore(a,i.firstChild)}},0)}function O(){var m={},U=!v&&(J||!R),r=[],s={},p;m[q]=!t;m[C]=false;m[y]=false;m[D]=false;m[l]=false;m[E]="";function V(a,c,b,d){function e(){N(c,b,d);f=null}if(s[c.src].finished)return;if(!a[y])s[c.src].finished=true;var f=d.elem||document.createElement("script");if(c.type)f.type=c.type;if(c.charset)f.charset=c.charset;x(f,d,"finished",e);if(d.elem){d.elem=null}else if(d.text){f.onload=f.onreadystatechange=null;f.text=d.text}else{f.src=c.real_src}i.insertBefore(f,i.firstChild);if(d.text){e()}}function W(c,b,d){var e,f,h=function(){b.ready_cb(b,d,function(){V(c,b,d,e)})},g=function(){b.finished_cb(b,d)};b.src=M(b.src,c[E]);b.real_src=b.src+(c[D]?(/\?.*$/.test(b.src)?"&_":"?_")+~~(Math.random()*1E9)+"=":"");if(!s[b.src])s[b.src]={items:[],finished:false};f=s[b.src].items;if(c[y]||f.length==0){e=f[f.length]={ready:false,finished:false,ready_listeners:[h],finished_listeners:[g]};T(c,b,d,e,(d.preload)?function(){e.ready=true;for(var a=0;a<e.ready_listeners.length;a++){setTimeout(e.ready_listeners[a],0)}e.ready_listeners=[]}:function(){N(b,d,e)})}else{e=f[0];if(e.finished){setTimeout(g,0)}else{e.finished_listeners.push(g)}}}function z(){var f,h=w(m,{}),g=[],o=0,A=false,n;function X(a,c,b){if(h[l])k("script preload finished: "+a.real_src);a.ready=true;a.exec_trigger=b;B()}function Y(a,c){if(h[l])k("script execution finished: "+a.real_src);a.ready=a.finished=true;a.exec_trigger=null;for(var b=0;b<c.scripts.length;b++){if(!c.scripts[b].finished)return}c.finished=true;B()}function B(){while(o<g.length){if(K(g[o])){if(h[l])k("$LAB.wait() executing: "+g[o]);try{g[o]()}catch(err){if(h[l])H("$LAB.wait() error caught: ",err)}}else if(!g[o].finished){if(S(g[o]))continue;break}o++}if(o==g.length){A=false;n=false}}function P(){if(!n||!n.scripts){g.push(n={scripts:[],finished:true,preload:U&&A})}}f={script:function(){P();A=true;for(var e=0;e<arguments.length;e++){(function(a,c){if(!L(a)){c=[a]}for(var b=0;b<c.length;b++){P();a=c[b];if(K(a))a=a();if(!a)continue;if(L(a)){var d=[].slice.call(a);d.push(b,1);c.splice.call(c,d);b--;continue}if(typeof a=="string")a={src:a};a=w(a,{ready:false,ready_cb:X,finished:false,finished_cb:Y});n.finished=false;n.scripts.push(a);W(h,a,n);if(h[C])f.wait()}})(arguments[e],arguments[e])}return f},wait:function(){if(arguments.length>0){for(var a=0;a<arguments.length;a++){g.push(arguments[a])}n=g[g.length-1]}else n=false;B();return f}};return{script:f.script,wait:f.wait,setOptions:function(a){w(a,h);h[q]=h[q]&&!t;return f}}}p={setGlobalDefaults:function(a){w(a,m);m[q]=m[q]&&!t;return p},setOptions:function(){return z().setOptions.apply(null,arguments)},script:function(){return z().script.apply(null,arguments)},wait:function(){return z().wait.apply(null,arguments)},queueScript:function(){r[r.length]={type:"script",args:[].slice.call(arguments)};return p},queueWait:function(){r[r.length]={type:"wait",args:[].slice.call(arguments)};return p},runQueue:function(){var a=p,c=r.length,b=c,d;for(;--b>=0;){d=r.shift();a=a[d.type].apply(null,d.args)}return a},noConflict:function(){j.$LAB=Q;return p},sandbox:function(){return O()}};return p}j.$LAB=O();(function(a,c,b){if(document.readyState==null&&document[a]){document.readyState="loading";document[a](c,b=function(){document.removeEventListener(c,b,false);document.readyState="complete"},false)}})("addEventListener","DOMContentLoaded")})(this);